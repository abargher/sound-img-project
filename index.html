<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="index.css">
<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>
<script src="https://tonejs.github.io/build/Tone.js"></script>
<script src="scales.js"></script>
<script src="node_modules/gamepad.js/gamepad.js"></script>
<script>const { GamepadListener } = gamepad;</script>

<div class="title">
<h1>Melodies of Chance (interactive!)</h1>
<h3>by: Alec Bargher</h3>
<h4>Best experienced with a gamepad.</h4>
</div>

<div class="top-control">
  <div class="left-control">
    <div class="play-pause">
      <label for="play-pause" class="label">Play (Start)</label>
      <input id="play-pause" class="play-pause" type="checkbox"><br>
      <div class="randomize">
        <button id="randomize" class="button">randomize melody</button>
      </div>
    </div>
  </div>
  <div class="key-form">
  <form>
  <label for="keys" class="label">Choose a key:</label>
  <select id="keys" name="Key select">
    <option value="keyC" >C</option>
    <option value="keyG" >G</option>
    <option value="keyD" >D</option>
    <option value="keyA" >A</option>
    <option value="keyE" >E</option>
    <option value="keyB" >B</option>
    <option value="keyGb">G♭/F♯</option>
    <option value="keyDb">D♭/C♯</option>
    <option value="keyAb">A♭</option>
    <option value="keyEb">E♭</option>
    <option value="keyBb">B♭</option>
    <option value="keyF" >F</option>
  </select><br><br>
  <label for="octaves" class="label">Choose a base octave:</label>
  <select id="octaves" name="Octave select">
    <option value="octave1">1</option>
    <option value="octave2">2</option>
    <option value="octave3" selected>3</option>
    <option value="octave4">4</option>
    <option value="octave5">5</option>
    <option value="octave6">6</option>
  </select><br><br>
  <label for="keySets" class="label">Choose a set of keys:</label>
  <select id="keySets" name="Key set select">
    <option value="keySet0">C, A, Gb, Eb</option>
    <option value="keySet1">G, E, Db, Bb</option>
    <option value="keySet2">D, B, Ab, F</option>
  </select>
  </form>
  </div>
</div>

<div class="sliders">
  <div class="sliders">
    <label for="noteCount" class="label">melody length (on new melodies):</label><br>
    <input class="slider" id="noteCount" type="range" value="16" min="16" max="256" step="8">
    <button id="noteCountReset" class="button">reset melody length</button>
  </div><br>
  <div class="sliders">
    <label for="arpegg" class="label">arpeggio quantity:</label><br>
    <input class="slider" id="arpegg" type="range" value="0.1" min="0" max="0.9" step="0.05">
    <button id="arpeggReset" class="button">reset arpeggios</button>
  </div><br>
  <div class="sliders">
    <label for="tempo" class="label">base tempo:</label><br>
    <input class="slider" id="tempo" type="range" value="90" min="50" max="200" step="1">
    <button id="tempoReset" class="button">reset tempo</button>
  </div><br>
  <div class="sliders">
    <label for="volume" class="label">base volume:</label><br>
    <input class="slider" id="volume" type="range" value="0.5" min="0" max="2.5" step="0.05">
    <button id="volumeReset" class="button">reset volume</button>
  </div>
</div><br><br>

<div class="controls-button">
  <button id="toggleHelp" class="button">show controls help</button>
</div>
<div id="instructions" class="instructions" style="visibility: hidden;">
  <h3>Controls: </h3>
  <p>
    <b>Start:</b> play/pause<br>
    <b>Select:</b> randomize melody<br>
    <b>Face buttons:</b> change key<br>
    <b>D-Pad left/right:</b> change set of keys (affects face buttons)<br>
    <b>D-pad up/down:</b> increase/decrease base octave<br><br>

    <b>Right trigger:</b> increase tempo<br>
    <b>Left trigger:</b> decrease tempo<br><br>

    <b>Left stick vertical:</b> pitch shift<br>
    <b>Left stick horizontal:</b> distortion<br><br>

    <b>Right stick vertical:</b> volume shift<br>
    <b>Right stick horizontal:</b> ping-pong delay<br>

  </p>
</div>

<div class="credits">
  <p class="credits"><a class="credits" href="https://github.com/abargher/maad22506/tree/website">view the source code here!</a></p>
</div>

<script type="module" src="experiment.js"></script>
